(this["webpackJsonpspoilers-app"]=this["webpackJsonpspoilers-app"]||[]).push([[0],{37:function(e,t,a){e.exports=a(50)},42:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(14),c=a.n(o),l=(a(42),a(5)),i=a(54),s=a(55),m=a(52),u="https://apinodespoilers.herokuapp.com/api";var d=a(11);var p=function(e){var t="react-spoiler-app",a=Object(r.useState)(""),o=Object(l.a)(a,2),c=o[0],p=o[1],f=Object(r.useState)(null),h=Object(l.a)(f,2),E=h[0],b=h[1],v=Object(d.f)();return Object(r.useEffect)((function(){return function(e,t){var a="".concat(u,"/spoilers/getall");fetch(a).then((function(t){200===t.status&&e(t.json())})).catch((function(e){t(e)}))}((function(e){e.then((function(e){p(e)}))}),(function(e){b(e)})),function(){}}),[]),n.a.createElement("div",null,function(){if(E)return n.a.createElement(i.a,{variant:"danger"},"Erro de conex\xe3o com o servidor")}()||(c&&c.length?c.map((function(e,a){return n.a.createElement(s.a,{key:a,className:"mt-3 mb-3"},n.a.createElement(s.a.Header,null,e.espoliador),n.a.createElement(s.a.Body,null,n.a.createElement(s.a.Title,null,n.a.createElement("h5",{className:"mt-0 mb-1"},e.titulo)),n.a.createElement(m.a,{variant:"danger",onClick:function(){return v.push("".concat(t,"/remover/").concat(e.id))}},"Remover"),n.a.createElement(m.a,{variant:"primary",onClick:function(){return v.push("".concat(t,"/editar/").concat(e.id))}},"Editar")))})):n.a.createElement(i.a,{variant:"light"},"Sem spoilers ainda. Fa\xe7a spoilers n\xe3o fa\xe7a guerra :")))};var f=function(e){var t=Object(r.useState)({espoliador:"",descricao:"",titulo:""}),a=Object(l.a)(t,2),o=a[0],c=a[1],i=Object(r.useState)(null),s=Object(l.a)(i,2),m=s[0],p=s[1],f=Object(r.useState)(!1),h=Object(l.a)(f,2),E=h[0],b=h[1];return E?n.a.createElement(d.a,{to:"/"}):n.a.createElement("form",{onSubmit:function(e){(function(e,t,a){var r="".concat(u,"/spoilers/create");fetch(r,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){e.ok?t(!0):e.json().then((function(e){e.error&&a(e.error)}))})).catch((function(e){return a(e)}))})(o,b,p),e.preventDefault()}},function(){if(m)return n.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Erro de conex\xe3o com o servidor")}(),n.a.createElement("fieldset",null,n.a.createElement("legend",null,"Criar Spoiler"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"espoliador"},"Espoliador"),n.a.createElement("input",{type:"text",className:"form-control",id:"espoliador",name:"espoliador",placeholder:"zededeus",minLength:"2",maxLength:"40",value:o.espoliador,onChange:function(e){return v(e)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"titulo"},"T\xedtulo"),n.a.createElement("input",{type:"text",className:"form-control",id:"titulo",name:"titulo","aria-describedby":"tituloAjuda",placeholder:"Heredit\xe1rio",minLength:"2",maxLength:"255",value:o.titulo,onChange:v}),n.a.createElement("small",{id:"tituloAjuda",className:"form-text text-muted"},"Um t\xedtulo pode ser um filme, s\xe9rie, livro...")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"descricao"},"Descri\xe7\xe3o"),n.a.createElement("textarea",{className:"form-control",id:"descricao",name:"descricao",placeholder:"Charlie \xe9 Paimon",minLength:"2",maxLength:"255",value:o.descricao,onChange:function(e){return v(e)}})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar")));function v(e){var t=e.target,a=t.name,r=t.value,n=JSON.parse(JSON.stringify(o));n[a]=r,c(n)}};function h(e){var t=Object(r.useState)({espoliador:"",descricao:"",titulo:""}),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(r.useState)(null),m=Object(l.a)(s,2),p=m[0],f=m[1],h=Object(r.useState)(!1),E=Object(l.a)(h,2),b=E[0],v=E[1];return Object(r.useEffect)((function(){return function(e,t,a){var r="".concat(u,"/spoilers/getone/").concat(e);fetch(r).then((function(e){e.json().then((function(e){e.error?a(e.erro):t(e)}))})).catch((function(e){return a(e)}))}(e.match.params.id,c,f),function(){console.log("willunmount edit")}}),[e.match.params]),b?n.a.createElement(d.a,{to:"/"}):n.a.createElement("form",{onSubmit:function(e){(function(e,t,a){var r=JSON.stringify(e),n="".concat(u,"/spoilers/put/").concat(e.id);fetch(n,{method:"put",body:r,headers:{"Content-Type":"application/json"}}).then((function(e){e.ok?t(!0):e.json().then((function(e){e.error&&a(e.error)}))})).catch((function(e){return a(e)}))})(o,v,f),e.preventDefault()}},function(){if(p)return n.a.createElement(i.a,{variant:"danger"},"Erro de conex\xe3o com o servidor")}(),n.a.createElement("fieldset",null,n.a.createElement("legend",null,"Editar Spoiler"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"espoliador"},"Espoliador"),n.a.createElement("input",{type:"text",className:"form-control-plaintext",id:"espoliador",name:"espoliador",placeholder:"zededeus",minLength:"2",maxLength:"40",value:o.espoliador,onChange:function(e){return g(e)},disabled:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"titulo"},"T\xedtulo"),n.a.createElement("input",{type:"text",className:"form-control",id:"titulo",name:"titulo","aria-describedby":"tituloAjuda",placeholder:"Heredit\xe1rio",minLength:"2",maxLength:"255",value:o.titulo,onChange:function(e){return g(e)}}),n.a.createElement("small",{id:"tituloAjuda",className:"form-text text-muted"},"Um t\xedtulo pode ser um filme, s\xe9rie, livro...")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"descricao"},"Descri\xe7\xe3o"),n.a.createElement("textarea",{className:"form-control",id:"descricao",name:"descricao",placeholder:"Charlie \xe9 Paimon",minLength:"2",maxLength:"255",value:o.descricao,onChange:function(e){return g(e)}})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar")));function g(e){var t=e.target,a=t.name,r=t.value,n=JSON.parse(JSON.stringify(o));n[a]=r,c(n)}}var E=a(29),b=a(30),v=a(34),g=a(31),N=a(35),j=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).handleClick=function(e){var t=a.props.match.params.id;console.log(t),fetch("http://localhost:3000/api/spoilers/del/".concat(t),{method:"delete"}).then((function(e){e.ok?a.setState({redirect:!0}):e.json().then((function(e){e.error&&a.setState({erro:e.error})}))})).catch((function(e){return a.setState({erro:e})})),e.preventDefault()},a.state={spoiler:{},erro:null,redirect:!1},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"exibeErro",value:function(){if(this.state.erro)return n.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Erro de conex\xe3o com o servidor")}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;fetch("http://localhost:3000/api/spoilers/getone/".concat(t)).then((function(t){t.json().then((function(t){t.error?e.setState({erro:t.error}):e.setState({spoiler:t})}))})).catch((function(t){return e.setState({erro:t})}))}},{key:"render",value:function(){return this.state.redirect?n.a.createElement(d.a,{to:"/"}):n.a.createElement("div",{className:"card"},n.a.createElement("h5",{className:"card-header"},this.state.spoiler.titulo),n.a.createElement("div",{className:"card-body"},this.exibeErro(),n.a.createElement("p",null,"Tem certeza que deseja remover esse Spoiler? As pessoas podem sentir falta dele :/"),n.a.createElement("blockquote",{className:"blockquote text-center"},n.a.createElement("p",{className:"mb-0"},this.state.spoiler.descricao),n.a.createElement("footer",{className:"blockquote-footer"},this.state.spoiler.espoliador," ",n.a.createElement("cite",{title:this.state.spoiler.titulo},this.state.spoiler.titulo))),n.a.createElement("button",{className:"btn btn-danger btn-block",type:"button",onClick:this.handleClick},"Remover")))}}]),t}(r.Component),O=a(12),y=a(53);a(48);a(49);c.a.render(n.a.createElement((function(e){var t=Object(r.useState)("react-spoiler-app"),a=Object(l.a)(t,2),o=a[0];return a[1],n.a.createElement(O.a,null,n.a.createElement("div",null,n.a.createElement(y.a,{fluid:!0},n.a.createElement("div",{className:"container"},n.a.createElement(O.b,{to:"/".concat(o,"/")},n.a.createElement("h1",{className:"display-4"},"#spoilers")),n.a.createElement("p",{className:"lead"},"N\xe3o se preocupe, tudo aqui \xe9 brincadeira. Ou n\xe3o :)"),n.a.createElement(m.a,{variant:"danger"},"Criar"))),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-md-center"},n.a.createElement("main",{className:"col-10",role:"main"},n.a.createElement(d.b,{path:"/".concat(o,"/"),exact:!0,component:p}),n.a.createElement(d.b,{path:"/".concat(o,"/criar/"),component:f}),n.a.createElement(d.b,{path:"/".concat(o,"/editar/:id"),component:h}),n.a.createElement(d.b,{path:"/".concat(o,"/remover/:id"),component:j})))),n.a.createElement("div",{className:"container mt-5 mb-0"},n.a.createElement("p",{className:"lead"},"endpage"))))}),null),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.27b3c073.chunk.js.map