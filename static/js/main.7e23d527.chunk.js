(this["webpackJsonpspoilers-app"]=this["webpackJsonpspoilers-app"]||[]).push([[0],{38:function(e,t,a){e.exports=a(51)},43:function(e,t,a){},49:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(14),c=a.n(o),l=(a(43),a(15)),i=a(16),s=a(19),m=a(17),u=a(20),d=a(9),p=a(54),f=a(55),h=a(53),E="http://localhost:3000/api";var b=a(12);var v=function(e){var t=Object(r.useState)(""),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(r.useState)(null),i=Object(d.a)(l,2),s=i[0],m=i[1],u=Object(b.f)();return Object(r.useEffect)((function(){return function(e,t){var a="".concat(E,"/spoilers/getall");fetch(a).then((function(t){200===t.status&&e(t.json())})).catch((function(e){t(e)}))}((function(e){e.then((function(e){c(e)}))}),(function(e){m(e)})),function(){}}),[]),n.a.createElement("div",null,function(){if(s)return n.a.createElement(p.a,{variant:"danger"},"Erro de conex\xe3o com o servidor")}()||(o&&o.length?o.map((function(e,t){return n.a.createElement(f.a,{key:t,className:"mt-3 mb-3"},n.a.createElement(f.a.Header,null,e.espoliador),n.a.createElement(f.a.Body,null,n.a.createElement(f.a.Title,null,n.a.createElement("h5",{className:"mt-0 mb-1"},e.titulo)),n.a.createElement(h.a,{variant:"danger",onClick:function(){return u.push("/remover/".concat(e.id))}},"Remover"),n.a.createElement(h.a,{variant:"primary",onClick:function(){return u.push("/editar/".concat(e.id))}},"Editar")))})):n.a.createElement(p.a,{variant:"light"},"Sem spoilers ainda. Fa\xe7a spoilers n\xe3o fa\xe7a guerra :")))};var g=function(e){var t=Object(r.useState)({espoliador:"",descricao:"",titulo:""}),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(r.useState)(null),i=Object(d.a)(l,2),s=i[0],m=i[1],u=Object(r.useState)(!1),p=Object(d.a)(u,2),f=p[0],h=p[1];return f?n.a.createElement(b.a,{to:"/"}):n.a.createElement("form",{onSubmit:function(e){(function(e,t,a){var r="".concat(E,"/spoilers/create");fetch(r,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){e.ok?t(!0):e.json().then((function(e){e.error&&a(e.error)}))})).catch((function(e){return a(e)}))})(o,h,m),e.preventDefault()}},function(){if(s)return n.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Erro de conex\xe3o com o servidor")}(),n.a.createElement("fieldset",null,n.a.createElement("legend",null,"Criar Spoiler"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"espoliador"},"Espoliador"),n.a.createElement("input",{type:"text",className:"form-control",id:"espoliador",name:"espoliador",placeholder:"zededeus",minLength:"2",maxLength:"40",value:o.espoliador,onChange:function(e){return v(e)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"titulo"},"T\xedtulo"),n.a.createElement("input",{type:"text",className:"form-control",id:"titulo",name:"titulo","aria-describedby":"tituloAjuda",placeholder:"Heredit\xe1rio",minLength:"2",maxLength:"255",value:o.titulo,onChange:v}),n.a.createElement("small",{id:"tituloAjuda",className:"form-text text-muted"},"Um t\xedtulo pode ser um filme, s\xe9rie, livro...")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"descricao"},"Descri\xe7\xe3o"),n.a.createElement("textarea",{className:"form-control",id:"descricao",name:"descricao",placeholder:"Charlie \xe9 Paimon",minLength:"2",maxLength:"255",value:o.descricao,onChange:function(e){return v(e)}})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar")));function v(e){var t=e.target,a=t.name,r=t.value,n=JSON.parse(JSON.stringify(o));n[a]=r,c(n)}};function j(e){var t=Object(r.useState)({espoliador:"",descricao:"",titulo:""}),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(r.useState)(null),i=Object(d.a)(l,2),s=i[0],m=i[1],u=Object(r.useState)(!1),f=Object(d.a)(u,2),h=f[0],v=f[1];return Object(r.useEffect)((function(){return function(e,t,a){var r="".concat(E,"/spoilers/getone/").concat(e);fetch(r).then((function(e){e.json().then((function(e){e.error?a(e.erro):t(e)}))})).catch((function(e){return a(e)}))}(e.match.params.id,c,m),function(){console.log("willunmount edit")}}),[e.match.params]),h?n.a.createElement(b.a,{to:"/"}):n.a.createElement("form",{onSubmit:function(e){(function(e,t,a){var r=JSON.stringify(e),n="".concat(E,"/spoilers/put/").concat(e.id);fetch(n,{method:"put",body:r,headers:{"Content-Type":"application/json"}}).then((function(e){e.ok?t(!0):e.json().then((function(e){e.error&&a(e.error)}))})).catch((function(e){return a(e)}))})(o,v,m),e.preventDefault()}},function(){if(s)return n.a.createElement(p.a,{variant:"danger"},"Erro de conex\xe3o com o servidor")}(),n.a.createElement("fieldset",null,n.a.createElement("legend",null,"Editar Spoiler"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"espoliador"},"Espoliador"),n.a.createElement("input",{type:"text",className:"form-control-plaintext",id:"espoliador",name:"espoliador",placeholder:"zededeus",minLength:"2",maxLength:"40",value:o.espoliador,onChange:function(e){return g(e)},disabled:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"titulo"},"T\xedtulo"),n.a.createElement("input",{type:"text",className:"form-control",id:"titulo",name:"titulo","aria-describedby":"tituloAjuda",placeholder:"Heredit\xe1rio",minLength:"2",maxLength:"255",value:o.titulo,onChange:function(e){return g(e)}}),n.a.createElement("small",{id:"tituloAjuda",className:"form-text text-muted"},"Um t\xedtulo pode ser um filme, s\xe9rie, livro...")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"descricao"},"Descri\xe7\xe3o"),n.a.createElement("textarea",{className:"form-control",id:"descricao",name:"descricao",placeholder:"Charlie \xe9 Paimon",minLength:"2",maxLength:"255",value:o.descricao,onChange:function(e){return g(e)}})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar")));function g(e){var t=e.target,a=t.name,r=t.value,n=JSON.parse(JSON.stringify(o));n[a]=r,c(n)}}var N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(e){var t=a.props.match.params.id;console.log(t),fetch("http://localhost:3000/api/spoilers/del/".concat(t),{method:"delete"}).then((function(e){e.ok?a.setState({redirect:!0}):e.json().then((function(e){e.error&&a.setState({erro:e.error})}))})).catch((function(e){return a.setState({erro:e})})),e.preventDefault()},a.state={spoiler:{},erro:null,redirect:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"exibeErro",value:function(){if(this.state.erro)return n.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Erro de conex\xe3o com o servidor")}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;fetch("http://localhost:3000/api/spoilers/getone/".concat(t)).then((function(t){t.json().then((function(t){t.error?e.setState({erro:t.error}):e.setState({spoiler:t})}))})).catch((function(t){return e.setState({erro:t})}))}},{key:"render",value:function(){return this.state.redirect?n.a.createElement(b.a,{to:"/"}):n.a.createElement("div",{className:"card"},n.a.createElement("h5",{className:"card-header"},this.state.spoiler.titulo),n.a.createElement("div",{className:"card-body"},this.exibeErro(),n.a.createElement("p",null,"Tem certeza que deseja remover esse Spoiler? As pessoas podem sentir falta dele :/"),n.a.createElement("blockquote",{className:"blockquote text-center"},n.a.createElement("p",{className:"mb-0"},this.state.spoiler.descricao),n.a.createElement("footer",{className:"blockquote-footer"},this.state.spoiler.espoliador," ",n.a.createElement("cite",{title:this.state.spoiler.titulo},this.state.spoiler.titulo))),n.a.createElement("button",{className:"btn btn-danger btn-block",type:"button",onClick:this.handleClick},"Remover")))}}]),t}(r.Component),O=a(11),y=(a(49),a(33)),S=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement(O.a,null,n.a.createElement("div",null,n.a.createElement(y.a,{fluid:!0},n.a.createElement("div",{className:"container"},n.a.createElement(O.b,{to:"/"},n.a.createElement("h1",{className:"display-4"},"#Spoilers")),n.a.createElement("p",{className:"lead"},"N\xe3o se preocupe, tudo aqui \xe9 brincadeira. Ou n\xe3o :)"),n.a.createElement(O.b,{to:"/criar",className:"btn btn-primary"},"Criar"))),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-md-center"},n.a.createElement("main",{className:"col-10",role:"main"},n.a.createElement(b.b,{path:"/",exact:!0,component:v}),n.a.createElement(b.b,{path:"/criar/",component:g}),n.a.createElement(b.b,{path:"/editar/:id",component:j}),n.a.createElement(b.b,{path:"/remover/:id",component:N})))),n.a.createElement("div",{className:"container mt-5 mb-0"},n.a.createElement("p",{className:"lead"},"endpage"))))}}]),t}(r.Component);a(50);c.a.render(n.a.createElement(S,null),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.7e23d527.chunk.js.map